/** * Created by web on 2015/8/25. */angular.module('cmdb')    .controller('MainCtrl',['MainService',        function (MainService) {            var self = this;  // self = $scope            MainService.get().then(function(resp){                self.projects = eval(resp.data);            });    }])    .controller('ServiceCtrl',['ServiceService',        function(ServiceService){            var self = this;            ServiceService.get().then(function(resp){                self.services = resp.data;            });    }])    .controller('ProjectCtrl',        ['ProjectService', '$routeParams',        function(ProjectService,$routeParams){            var self = this;            self.projectname = $routeParams.projectName;            ProjectService.getServiceIp($routeParams.projectName).then(                function(resp){                    self.ipArray = eval(resp.data);            });    }])    .controller('ProjectDeploymentCtrl',        ['DeploymentService', '$routeParams',        function (DeploymentService, $routeParams){            var self = this;            self.projectname = $routeParams.projectName;            self.ip = $routeParams.ip;            self.range = function(n) {return new Array(n)};            DeploymentService.getDeployment(self.projectname, self.ip)                .then(function(resp) {                    self.dateArray = eval(resp.data);                    // current 目录一直指向最新的日期,就是数组的最后的一项(如果服务已排序)                    self.currentIndex = self.dateArray.length - 1;                    self.currentDate = self.dateArray[self.currentIndex];                });    }])    .controller('ProjectDeploymentDetailCtrl',        ['DeploymentService','$routeParams',        function(DeploymentService, $routeParams){            var self = this;            self.projectname = $routeParams.projectName;            DeploymentService.getDeploymentDetail(                self.projectname, $routeParams.ip, $routeParams.deployDate)                .then(function(resp){                    self.detail = angular.fromJson(resp.data)                });        }]);